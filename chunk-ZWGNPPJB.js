import{a as Q,b as W,c as X,d as Y,e as $,i as N,j as ee,l as te,n as oe,q as ne,r as A,u as fe}from"./chunk-B73NRUUQ.js";import{b as de}from"./chunk-TKZEV6Y5.js";import"./chunk-OXEZHYRO.js";import{a as ie,b as be,c as ve}from"./chunk-L7BSNPE2.js";import{a as ge,e as he}from"./chunk-CYDWIF3P.js";import{a as re,b as V,c as pe,d as se,e as ae,f as le,g as ce,h as ue,i as me}from"./chunk-72AFM3JC.js";import{Aa as r,Ba as n,Ca as y,Da as M,Ga as f,Ia as h,Ma as a,Mb as w,Na as b,Ob as v,Pb as T,Qa as _,Ra as F,Sa as m,Ta as d,U as x,Ua as q,Z as I,Za as k,_ as S,eb as U,f as H,fb as E,gb as G,hb as J,ib as O,jb as Z,kb as C,la as l,ma as g,ua as c,vb as K,ya as u}from"./chunk-RVRWXEWA.js";var P=T("groupsState"),xe=v(P,e=>e.isShowForm),Ze=v(P,e=>e.isShowDeletePopup),_e=v(P,e=>e.groupList),R=v(P,e=>e.isNewGroupSubmitInProgress),Ce=v(P,e=>e.isRefreshGroupsInProgress),ye=v(P,e=>e.groupsTimerValue);function ke(e,t){if(e&1){let p=M();r(0,"button",6),f("click",function(){I(p);let o=h();return S(o.dispatchShowPopupAction())}),n()}}function Ee(e,t){if(e&1){let p=M();r(0,"div",7)(1,"div",8)(2,"h2",9),a(3,"Do you really want to delete the group?"),n(),r(4,"div",10)(5,"button",11),f("click",function(){I(p);let o=h();return S(o.deleteGroup())}),m(6,"async"),a(7,"Delete"),n(),r(8,"button",12),f("click",function(){I(p);let o=h();return S(o.dispathHidePopupAction())}),m(9,"async"),a(10,"Cancel"),n()()()()}if(e&2){let p=h();l(5),c("disabled",d(6,2,p.isSubmitInProgress$)),l(3),c("disabled",d(9,4,p.isSubmitInProgress$))}}var we=(()=>{let t=class t{constructor(i,o){this.manageGroupsSrv=i,this.store=o,this.isGroupOwner=this.manageGroupsSrv.isGroupOwner,this.isShowPopupSubject=new H(!1),this.isShowPopup$=this.isShowPopupSubject.asObservable()}ngOnInit(){this.isSubmitInProgress$=this.store.select(R),this.managePopup()}managePopup(){this.groupFeatureSubscription$=this.store.select(P).subscribe(i=>{let o=i.delGroupId===this.groupItem.id;this.isShowPopupSubject.next(o)})}dispatchShowPopupAction(){this.store.dispatch(X({delGroupId:this.groupItem.id}))}dispathHidePopupAction(){this.store.dispatch(Y())}deleteGroup(){this.store.dispatch(oe({groupID:this.groupItem.id})),this.store.dispatch(N())}ngOnDestroy(){this.groupFeatureSubscription$.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(g(ne),g(w))},t.\u0275cmp=x({type:t,selectors:[["app-group-item"]],inputs:{groupItem:"groupItem"},standalone:!0,features:[_],decls:17,vars:10,consts:[[1,"group"],[1,"group-name"],[1,"group-date"],[1,"group-owner"],["type","button","id","delGroupBtn","class","group-delete-button",3,"click",4,"ngIf"],["class","popup-container","id","popupContainer",4,"ngIf"],["type","button","id","delGroupBtn",1,"group-delete-button",3,"click"],["id","popupContainer",1,"popup-container"],[1,"popup"],[1,"delete-group-popup-title"],[1,"popup-buttons-container"],["type","submit",1,"green-button","shadow-button","save-new-group","form-btn","popup-btn","form-btn",3,"disabled","click"],["type","button","id","popupCancel",1,"green-button","shadow-button","cancel-new-group","form-btn","popup-btn",3,"disabled","click"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"span"),a(3,"Group name: "),n(),a(4),n(),r(5,"div",2)(6,"span"),a(7,"Created: "),n(),a(8),m(9,"date"),n(),r(10,"div",3)(11,"span"),a(12,"Group id: "),n(),a(13),n(),u(14,ke,1,0,"button",4),n(),u(15,Ee,11,6,"div",5),m(16,"async")),o&2&&(l(4),b(s.groupItem.name),l(4),b(q(9,5,s.groupItem.createdAt,"medium")),l(5),b(s.groupItem.id),l(1),c("ngIf",s.isGroupOwner(s.groupItem.createdBy)),l(1),c("ngIf",d(16,8,s.isShowPopup$)))},dependencies:[C,G,O,Z],styles:['[_nghost-%COMP%]{width:90%;margin:0 auto 5px;display:block}.group[_ngcontent-%COMP%]{min-height:80px;position:relative;background-color:#fafafa;border-radius:5px;padding:10px;cursor:pointer}.group-name[_ngcontent-%COMP%]{max-width:280px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;line-height:normal;color:#000}.group-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:17px;font-style:normal;font-weight:400;line-height:normal}.group-date[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:12px;font-style:normal;font-weight:400;line-height:normal;position:absolute;top:10px;right:10px;color:#27ae60}.group-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:11px;font-style:normal;font-weight:400;line-height:normal}.group-owner[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:normal;position:absolute;bottom:10px;left:15px;color:#797979}.group-owner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:12px;font-style:normal;font-weight:400;line-height:normal}.group[_ngcontent-%COMP%]:active:not(.group-delete-button){background-color:#f4f4f7}.group-delete-button[_ngcontent-%COMP%]{width:30px;height:30px;position:absolute;right:15px;bottom:10px;background:url("./media/trash-ED7FE7C2.png") no-repeat center center/31px;border:none;border-radius:100%;cursor:pointer}.group-delete-button[_ngcontent-%COMP%]:active{box-shadow:0 4px 4px #82828240}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:9999}.popup[_ngcontent-%COMP%]{width:400px;min-height:20px;background-color:#eee;padding:20px;border:1px solid #CCC;box-shadow:0 0 10px #0000001a;border-radius:5px}.popup-buttons-container[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;justify-content:center;align-items:center;gap:20px}.popup-btn[_ngcontent-%COMP%]{margin:20px 0 15px}.popup-label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;margin-left:22px;font-family:Roboto,sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:normal}.popup-input[_ngcontent-%COMP%]{width:320px;display:block;margin:0 auto 5px}.delete-group-popup-title[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;line-height:normal;color:#797979;text-align:center}']});let e=t;return e})();function Pe(){return e=>{let t=e.value;return/^[a-zA-Z0-9\s]*$/.test(t)?null:{specialCharacterErr:!0}}}function Te(e,t){if(e&1&&(r(0,"div",9),a(1),n()),e&2){let p=t.ngIf;l(1),b(p)}}function Ne(e,t){if(e&1&&y(0,"app-group-item",12),e&2){let p=t.$implicit;c("groupItem",p)}}function Re(e,t){if(e&1&&(r(0,"div",10),u(1,Ne,1,1,"app-group-item",11),m(2,"sortByDatePipe"),n()),e&2){let p=h();l(1),c("ngForOf",d(2,2,p.groupList))("ngForTrackBy",p.getGroupID)}}function De(e,t){e&1&&(r(0,"div"),a(1,"Please enter a name."),n())}function Le(e,t){e&1&&(r(0,"div"),a(1,"The name is too long."),n())}function $e(e,t){e&1&&(r(0,"div"),a(1,"Only letters, digits and spaces are allowed. "),n())}function Ve(e,t){if(e&1&&(r(0,"div",22),u(1,De,2,0,"div",23)(2,Le,2,0,"div",23)(3,$e,2,0,"div",23),n()),e&2){let p=h(2);l(1),c("ngIf",p.isFieldHasError(p.newGroupNameForm,"newGroupName","required")),l(1),c("ngIf",p.isFieldHasError(p.newGroupNameForm,"newGroupName","maxlength")),l(1),c("ngIf",p.isFieldHasError(p.newGroupNameForm,"newGroupName","specialCharacterErr"))}}var Ae=e=>({"border-color":e});function Be(e,t){if(e&1){let p=M();r(0,"div",13),f("click",function(o){I(p);let s=h();return S(s.closePopupOnClick(o))}),r(1,"div",14)(2,"form",15),f("submit",function(o){I(p);let s=h();return S(s.onSubmit(o))}),r(3,"label",16),a(4,"Enter Group Name"),n(),y(5,"input",17),u(6,Ve,4,3,"div",18),r(7,"div",19)(8,"button",20),m(9,"async"),a(10,"Save"),n(),r(11,"button",21),m(12,"async"),a(13,"Cancel"),n()()()()()}if(e&2){let p=h();l(2),c("formGroup",p.newGroupNameForm),l(3),c("ngStyle",F(9,Ae,p.isFieldInvalid(p.newGroupNameForm,"newGroupName")?"red":"")),l(1),c("ngIf",p.isFieldInvalid(p.newGroupNameForm,"newGroupName")),l(2),c("disabled",p.newGroupNameForm.invalid||d(9,5,p.isSubmitInProgress$)),l(3),c("disabled",d(12,7,p.isSubmitInProgress$))}}function ze(e,t){e&1&&(r(0,"div",24),y(1,"div",25),r(2,"div",26),a(3," Enter your request or create your own cards. "),n()())}var Ie=(()=>{let t=class t{constructor(i,o,s){this.store=i,this.fb=o,this.checkFieldSrv=s,this.isFieldInvalid=this.checkFieldSrv.isFieldInvalid,this.isFieldHasError=this.checkFieldSrv.isFieldHasError}ngOnInit(){this.isShowForm$=this.store.select(xe),this.groupsTimerValue$=this.store.select(ye),this.isSubmitInProgress$=this.store.select(R),this.isGroupsRefreshing$=this.store.select(Ce),this.initializeForm(),this.checkListOfGroups()}initializeForm(){this.newGroupNameForm=this.fb.group({newGroupName:["",[V.required,V.maxLength(30),Pe()]]})}checkListOfGroups(){this.groupListSubscription$=this.store.select(_e).subscribe(i=>{i?.length||this.store.dispatch($({isLoadManual:!1})),this.groupList=i})}closePopupOnClick(i){let o=i.target;(o.id==="popupContainer"||o.id==="popupCancel")&&(this.store.dispatch(W()),this.newGroupNameForm.get("newGroupName")?.reset())}showForm(){this.store.dispatch(Q())}onSubmit(i){i.preventDefault(),this.newGroupNameForm.invalid||(this.store.dispatch(te({payload:{name:this.newGroupNameForm.get("newGroupName")?.value}})),this.store.dispatch(N()),this.newGroupNameForm.get("newGroupName")?.reset())}refreshGroups(){this.store.dispatch($({isLoadManual:!0})),this.store.dispatch(ee())}getGroupID(i,o){return o.id}ngOnDestroy(){this.groupListSubscription$.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(g(w),g(ue),g(de))},t.\u0275cmp=x({type:t,selectors:[["app-groups"]],standalone:!0,features:[_],decls:16,vars:10,consts:[[1,"container"],[1,"groups-buttons-container"],["type","button",1,"green-button","shadow-button","groups-button","refresh-button",3,"disabled","click"],["type","button",1,"green-button","shadow-button","groups-button","create-group-button",3,"click"],["class","timer-value",4,"ngIf"],[1,"groups-title"],["class","groups-container",4,"ngIf"],["class","popup-container","id","popupContainer",3,"click",4,"ngIf"],["noResults",""],[1,"timer-value"],[1,"groups-container"],[3,"groupItem",4,"ngFor","ngForOf","ngForTrackBy"],[3,"groupItem"],["id","popupContainer",1,"popup-container",3,"click"],[1,"popup"],[1,"form",3,"formGroup","submit"],["for","newGroupName",1,"new-group-name-label","form-label","popup-label"],["formControlName","newGroupName","type","text","name","newGroupName","id","newGroupName",1,"form-input","popup-input",3,"ngStyle"],["class","invalid-feedback",4,"ngIf"],[1,"form-buttons-container","popup-buttons-container"],["type","submit",1,"green-button","shadow-button","save-new-group","form-btn","popup-btn","form-btn",3,"disabled"],["type","button","id","popupCancel",1,"green-button","shadow-button","cancel-new-group","form-btn","popup-btn",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[1,"no-results"],[1,"no-results-logo"],[1,"no-results-message"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return s.refreshGroups()}),m(3,"async"),a(4,"Refresh Group List"),n(),r(5,"button",3),f("click",function(){return s.showForm()}),a(6,"Create New Group"),n(),u(7,Te,2,1,"div",4),m(8,"async"),n(),r(9,"h1",5),a(10,"Groups:"),n(),u(11,Re,3,4,"div",6),n(),u(12,Be,14,11,"div",7),m(13,"async"),u(14,ze,4,0,"ng-template",null,8,k)),o&2&&(l(2),c("disabled",d(3,4,s.isGroupsRefreshing$)),l(5),c("ngIf",d(8,6,s.groupsTimerValue$)),l(4),c("ngIf",s.groupList),l(1),c("ngIf",d(13,8,s.isShowForm$)))},dependencies:[C,E,G,J,O,we,ie,me,ae,re,pe,se,le,ce],styles:["[_nghost-%COMP%]{width:50%}.groups-buttons-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;gap:50px;margin-bottom:20px}.groups-button[_ngcontent-%COMP%]{padding:10px}.timer-value[_ngcontent-%COMP%]{position:absolute;top:7px;left:110px;font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;line-height:normal;color:#eb5757}.groups-title[_ngcontent-%COMP%]{margin-left:10px;font-family:Roboto,sans-serif;font-size:22px;font-style:normal;font-weight:700;line-height:normal;color:#000}.groups-container[_ngcontent-%COMP%]{height:calc(100vh - 210px);background-color:#f4f4f7;border-radius:5px;padding:10px;overflow:auto}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:9999}.popup[_ngcontent-%COMP%]{width:400px;min-height:20px;background-color:#eee;padding:20px;border:1px solid #ccc;box-shadow:0 0 10px #0000001a;border-radius:5px}.popup-buttons-container[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;justify-content:center;align-items:center;gap:20px}.popup-btn[_ngcontent-%COMP%]{margin:20px 0 15px}.popup-label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;margin-left:22px;font-family:Roboto,sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:normal}.popup-input[_ngcontent-%COMP%]{width:320px;display:block;margin:0 auto 5px}.delete-group-popup-title[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;line-height:normal;color:#797979;text-align:center}.ng-star-inserted[_ngcontent-%COMP%]{padding-left:15px}"]});let e=t;return e})();var j=T("peopleState"),Se=v(j,e=>e.peopleList),Ge=v(j,e=>e.isRefreshPeopleInProgress),Oe=v(j,e=>e.peopleTimerValue);var je=e=>({"active-conversation":e}),Me=(()=>{let t=class t{constructor(i,o){this.store=i,this.router=o}ngOnInit(){this.getConversation()}createOrGoToConversation(){localStorage.setItem(this.personItem.uid,this.personItem.name),this.activeConversation?this.router.navigate(["conversation",this.activeConversation.id]):this.store.dispatch(he({payload:this.personItem.uid}))}getConversation(){this.conversationsListSubscr$=this.store.select(ve).subscribe(i=>{this.activeConversation=i.find(o=>o.companionID===this.personItem.uid)})}ngOnDestroy(){this.conversationsListSubscr$.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(g(w),g(K))},t.\u0275cmp=x({type:t,selectors:[["app-person-item"]],inputs:{personItem:"personItem"},standalone:!0,features:[_],decls:9,vars:5,consts:[[1,"person",3,"ngClass","click"],[1,"person-name"],[1,"person-id"]],template:function(o,s){o&1&&(r(0,"div",0),f("click",function(){return s.createOrGoToConversation()}),r(1,"div",1)(2,"span"),a(3,"Person name: "),n(),a(4),n(),r(5,"div",2)(6,"span"),a(7,"Person id: "),n(),a(8),n()()),o&2&&(c("ngClass",F(3,je,s.activeConversation)),l(4),b(s.personItem.name),l(4),b(s.personItem.uid))},dependencies:[C,U],styles:["[_nghost-%COMP%]{width:90%;margin:0 auto 5px;display:block}.person[_ngcontent-%COMP%]{min-height:80px;position:relative;background-color:#fafafa;border-radius:5px;padding:10px;cursor:pointer}.person-name[_ngcontent-%COMP%]{max-width:280px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;line-height:normal;color:#000}.person-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:17px;font-style:normal;font-weight:400;line-height:normal}.person-id[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:normal;position:absolute;bottom:10px;left:15px;color:#797979}.person-id[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:12px;font-style:normal;font-weight:400;line-height:normal}.person[_ngcontent-%COMP%]:active:not(.group-delete-button){background-color:#f4f4f7}.active-conversation[_ngcontent-%COMP%]{background-color:#addfad}"]});let e=t;return e})();function He(e,t){if(e&1&&(r(0,"div",8),a(1),n()),e&2){let p=t.ngIf;l(1),b(p)}}function qe(e,t){if(e&1&&y(0,"app-person-item",9),e&2){let p=t.$implicit;c("personItem",p)}}function Ue(e,t){e&1&&(r(0,"div",10),y(1,"div",11),r(2,"div",12),a(3," Enter your request or create your own cards. "),n()())}var Fe=(()=>{let t=class t{constructor(i){this.store=i}ngOnInit(){this.isPeopleRefreshing$=this.store.select(Ge),this.peopleTimerValue$=this.store.select(Oe),this.checkListOfPeople(),this.checkListOfConversations()}checkListOfPeople(){this.peopleListSubscription$=this.store.select(Se).subscribe(i=>{i?.length||this.store.dispatch(A({isLoadManual:!1}));let o=JSON.parse(localStorage.getItem("currentUser"));this.peopleList=i.filter(s=>s.uid!==o["rs-uid"])})}checkListOfConversations(){this.wasAttemptToLoadConversationsSubscr$=this.store.select(be).subscribe(i=>{i||this.store.dispatch(ge())})}refreshPeople(){this.store.dispatch(A({isLoadManual:!0})),this.store.dispatch(fe())}getGroupID(i,o){return o.uid}ngOnDestroy(){this.peopleListSubscription$.unsubscribe(),this.wasAttemptToLoadConversationsSubscr$.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(g(w))},t.\u0275cmp=x({type:t,selectors:[["app-people"]],standalone:!0,features:[_],decls:13,vars:8,consts:[[1,"container"],[1,"people-buttons-container"],["type","button",1,"green-button","shadow-button","people-button","refresh-button",3,"disabled","click"],["class"," timer-value",4,"ngIf"],[1,"people-title"],[1,"people-container"],[3,"personItem",4,"ngFor","ngForOf","ngForTrackBy"],["noResults",""],[1,"timer-value"],[3,"personItem"],[1,"no-results"],[1,"no-results-logo"],[1,"no-results-message"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return s.refreshPeople()}),m(3,"async"),a(4,"Refresh People List"),n(),u(5,He,2,1,"div",3),m(6,"async"),n(),r(7,"h1",4),a(8,"People:"),n(),r(9,"div",5),u(10,qe,1,1,"app-person-item",6),n()(),u(11,Ue,4,0,"ng-template",null,7,k)),o&2&&(l(2),c("disabled",d(3,4,s.isPeopleRefreshing$)),l(3),c("ngIf",d(6,6,s.peopleTimerValue$)),l(5),c("ngForOf",s.peopleList)("ngForTrackBy",s.getGroupID))},dependencies:[C,E,G,O,Me],styles:["[_nghost-%COMP%]{width:50%}.people-buttons-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;margin-bottom:20px}.people-button[_ngcontent-%COMP%]{padding:10px}.timer-value[_ngcontent-%COMP%]{position:absolute;top:7px;left:205px;font-family:Roboto,sans-serif;font-size:18px;font-style:normal;font-weight:700;line-height:normal;color:#eb5757}.people-title[_ngcontent-%COMP%]{margin-left:10px;font-family:Roboto,sans-serif;font-size:22px;font-style:normal;font-weight:700;line-height:normal;color:#000}.people-container[_ngcontent-%COMP%]{height:calc(100vh - 210px);background-color:#f4f4f7;border-radius:5px;padding:10px;overflow:auto}"]});let e=t;return e})();var Ft=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=x({type:t,selectors:[["app-main"]],standalone:!0,features:[_],decls:4,vars:0,consts:[[1,"wrapper"],[1,"main-container"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1),y(2,"app-groups")(3,"app-people"),n()())},dependencies:[C,Ie,Fe],styles:[".main-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]});let e=t;return e})();export{Ft as MainComponent};
