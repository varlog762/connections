import{a as G}from"./chunk-T3MBQJ4F.js";import{a as j}from"./chunk-AGG2RDLJ.js";import{a as $,b as B}from"./chunk-PZW6CMPM.js";import{a as O,b as Y}from"./chunk-TKZEV6Y5.js";import{a as q,c as L}from"./chunk-OXEZHYRO.js";import{a as D,b as c,c as H,d as P,e as k,f as N,g as V,h as A,i as M}from"./chunk-72AFM3JC.js";import{Aa as r,Ba as n,Ca as f,Ga as E,Ia as g,Ma as m,Mb as R,Qa as h,Ra as v,Sa as S,Ta as b,U as F,gb as y,hb as x,ib as I,kb as w,la as o,ma as u,ua as a,wb as C,ya as p,yb as T}from"./chunk-RVRWXEWA.js";function z(){return e=>{let i=e.value;return i.length<8?{lengthErr:!0}:/\d/.test(i)?/[a-z]/.test(i)?/[A-Z]/.test(i)?/[!@#$%^&*(),.?":{}|<>]/.test(i)?null:{specialCharacterErr:!0}:{uppercaseErr:!0}:{lowercaseErr:!0}:{digitErr:!0}}}function J(e,i){e&1&&(r(0,"div"),m(1,"Please enter an email."),n())}function K(e,i){e&1&&(r(0,"div"),m(1,"The email is invalid."),n())}function Q(e,i){e&1&&(r(0,"div"),m(1,"Please enter another email."),n())}function W(e,i){if(e&1&&(r(0,"div",13),p(1,J,2,0,"div",14)(2,K,2,0,"div",14)(3,Q,2,0,"div",14),n()),e&2){let t=g();o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"email","required")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"email","email")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"email","emailDuplicated"))}}function X(e,i){e&1&&(r(0,"div"),m(1,"Please enter a name."),n())}function ee(e,i){e&1&&(r(0,"div"),m(1,"The name is too long."),n())}function ie(e,i){e&1&&(r(0,"div"),m(1,"Only letters and spaces are allowed."),n())}function te(e,i){if(e&1&&(r(0,"div",13),p(1,X,2,0,"div",14)(2,ee,2,0,"div",14)(3,ie,2,0,"div",14),n()),e&2){let t=g();o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"name","required")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"name","maxlength")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"name","nameErr"))}}function re(e,i){e&1&&(r(0,"div"),m(1,"Please enter a password."),n())}function ne(e,i){e&1&&(r(0,"div"),m(1,"Your password isn't strong enough: at least 8 characters."),n())}function oe(e,i){e&1&&(r(0,"div"),m(1,"Your password isn't strong enough: a mixture of letters and numbers."),n())}function ae(e,i){e&1&&(r(0,"div"),m(1,"Your password isn't strong enough: a mixture of both uppercase and lowercase letters."),n())}function se(e,i){e&1&&(r(0,"div"),m(1,"Your password isn't strong enough: a mixture of both uppercase and lowercase letters."),n())}function me(e,i){e&1&&(r(0,"div"),m(1,"Your password isn't strong enough: inclusion of at least one special character, e.g., ! # ? ]."),n())}function le(e,i){if(e&1&&(r(0,"div",13),p(1,re,2,0,"div",14)(2,ne,2,0,"div",14)(3,oe,2,0,"div",14)(4,ae,2,0,"div",14)(5,se,2,0,"div",14)(6,me,2,0,"div",14),n()),e&2){let t=g();o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"password","required")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"password","lengthErr")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"password","digitErr")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"password","lowercaseErr")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"password","uppercaseErr")),o(1),a("ngIf",t.isFieldHasError(t.registrationForm,"password","specialCharacterErr"))}}var _=e=>({"border-color":e}),we=(()=>{let i=class i{constructor(d,l,s){this.fb=d,this.store=l,this.checkFieldSrv=s,this.isFieldInvalid=this.checkFieldSrv.isFieldInvalid,this.isFieldHasError=this.checkFieldSrv.isFieldHasError}ngOnInit(){this.initializeForm(),this.isSubmitInProgress$=this.store.select(q),this.subscribeErrors()}initializeForm(){this.registrationForm=this.fb.group({email:["",{validators:[c.required,c.email],asyncValidators:[O(this.store)],updateOn:"change"}],name:["",[c.required,c.maxLength(40),j()]],password:["",[c.required,z()]]})}subscribeErrors(){this.errorSubscription$=this.store.select(L).subscribe(d=>{let{errorType:l,duplicatedEmails:s}=d;l===G.DUPLICATED_EMAILS&&s.includes(this.registrationForm.get("email")?.value)?this.registrationForm.get("email")?.setErrors({emailDuplicated:!0}):this.registrationForm.get("email")?.setErrors(null)})}onSubmit(d){d.preventDefault(),this.registrationForm.invalid||(this.store.dispatch($(this.registrationForm.value)),this.store.dispatch(B()))}ngOnDestroy(){this.errorSubscription$.unsubscribe()}};i.\u0275fac=function(l){return new(l||i)(u(A),u(R),u(Y))},i.\u0275cmp=F({type:i,selectors:[["app-registration"]],standalone:!0,features:[h],decls:22,vars:16,consts:[[1,"wrapper"],[1,"registration-form-container","form-container"],[1,"registartin-form","form",3,"formGroup","submit"],[1,"regitration-form-legend","form-legend"],["for","email",1,"registration-form-email-label","form-label"],["formControlName","email","id","email","name","email","type","text",1,"registration-form-email","form-input",3,"ngStyle"],["class","invalid-feedback",4,"ngIf"],["for","name",1,"registration-form-username-label","form-label"],["formControlName","name","id","name","name","name","type","text",1,"registration-form-username","form-input",3,"ngStyle"],["for","password",1,"registration-form-password-label","form-label"],["formControlName","password","id","password","name","password","type","password",1,"registration-form-password","form-input",3,"ngStyle"],["routerLink","/signin",1,"form-link"],["type","submit",1,"green-button","shadow-button","form-btn",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(l,s){l&1&&(r(0,"div",0)(1,"div",1)(2,"form",2),E("submit",function(Z){return s.onSubmit(Z)}),r(3,"legend",3),m(4,"Registration"),n(),r(5,"label",4),m(6,"Email"),n(),f(7,"input",5),p(8,W,4,3,"div",6),r(9,"label",7),m(10,"Username"),n(),f(11,"input",8),p(12,te,4,3,"div",6),r(13,"label",9),m(14,"Password"),n(),f(15,"input",10),p(16,le,7,6,"div",6),r(17,"a",11),m(18,"Sign in"),n(),r(19,"button",12),S(20,"async"),m(21,"Submit"),n()()()()),l&2&&(o(2),a("formGroup",s.registrationForm),o(5),a("ngStyle",v(10,_,s.isFieldInvalid(s.registrationForm,"email")?"red":"")),o(1),a("ngIf",s.isFieldInvalid(s.registrationForm,"email")),o(3),a("ngStyle",v(12,_,s.isFieldInvalid(s.registrationForm,"name")?"red":"")),o(1),a("ngIf",s.isFieldInvalid(s.registrationForm,"name")),o(3),a("ngStyle",v(14,_,s.isFieldInvalid(s.registrationForm,"password")?"red":"")),o(1),a("ngIf",s.isFieldInvalid(s.registrationForm,"password")),o(3),a("disabled",s.registrationForm.invalid||b(20,8,s.isSubmitInProgress$)))},dependencies:[w,y,x,I,T,C,M,k,D,H,P,N,V],styles:[".registration-form-container[_ngcontent-%COMP%]{width:344px;min-height:248px;position:relative}"]});let e=i;return e})();export{we as RegistrationComponent};
