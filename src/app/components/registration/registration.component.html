<div class="wrapper">
  <div class="registration-form-container form-container">
    <form [formGroup]="registrationForm" class="registartin-form form" (submit)="onSubmit($event)">
      <legend class="regitration-form-legend form-legend">Registration</legend>
      <label for="email" class="registration-form-email-label form-label">Email</label>
      <input 
        formControlName="email" 
        id="email" 
        name="email" 
        type="text" 
        class="registration-form-email form-input"
        [ngStyle]="{'border-color': isFieldInvalid(registrationForm, 'email') ? 'red' : ''}">

      <div *ngIf="isFieldInvalid(registrationForm,'email')" class="invalid-feedback">
        <div *ngIf="isFieldHasError(registrationForm, 'email', 'required')">Please enter an email.</div>
        <div *ngIf="isFieldHasError(registrationForm, 'email', 'email')">The email is invalid.</div>
        <div *ngIf="isFieldHasError(registrationForm, 'email', 'emailDuplicated')">Please enter another email.</div>
      </div>

      <label for="name" class="registration-form-username-label form-label">Username</label>
      <input
        formControlName="name"
        id="name"
        name="name" 
        type="text" 
        class="registration-form-username form-input"
        [ngStyle]="{'border-color': isFieldInvalid(registrationForm, 'name') ? 'red' : ''}">

        <div *ngIf="isFieldInvalid(registrationForm,'name')" class="invalid-feedback">
          <div *ngIf="isFieldHasError(registrationForm, 'name', 'required')">Please enter a name.</div>
          <div *ngIf="isFieldHasError(registrationForm, 'name', 'maxlength')">The name is too long.</div>
          <div *ngIf="isFieldHasError(registrationForm, 'name', 'nameErr')">Only letters and spaces are allowed.</div>
        </div>

      <label for="password" class="registration-form-password-label form-label">Password</label>
      <input formControlName="password" id="password" name="password" type="password" class="registration-form-password form-input">
      <a routerLink="/signin" class="form-link">Sign in</a>
      <button 
        type="submit"
        class="green-button shadow-button form-btn"
        [disabled]="registrationForm.invalid || (isSubmitInProgress$ | async)"
        >Submit</button>
    </form>
  </div>
</div>

